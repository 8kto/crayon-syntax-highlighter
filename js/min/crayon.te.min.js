(function(e){e.fn.exists=function(){return 0!==this.length};e.fn.style=function(b,a,e){var q=this.get(0);if("undefined"!=typeof q)if(q=q.style,"undefined"!=typeof b)if("undefined"!=typeof a)"undefined"!=typeof q.setProperty?q.setProperty(b,a,"undefined"!=typeof e?e:""):q[b]=a;else return q[b];else return q};e(document).ready(function(){CrayonSyntax.init()});CrayonSyntax=new function(){var b=this,a={},v,q=0,k;b.init=function(){"undefined"==typeof a&&(a={});v=CrayonSyntaxStrings;e("div.crayon-syntax").each(function(){b.process(this)})};
b.process=function(c,h){c=e(c);var m=c.attr("id");"crayon-"==m&&(m+=q++);c.attr("id",m);CrayonUtil.log(m);"undefined"==typeof h&&(h=!1);if(h||d(m)){var t=c.find(".crayon-toolbar"),l=c.find(".crayon-info"),n=c.find(".crayon-plain"),A=c.find(".crayon-main"),p=c.find(".crayon-table"),v=c.find(".crayon-code"),x=c.find(".crayon-title"),w=c.find(".crayon-tools"),u=c.find(".crayon-nums"),B=c.find(".crayon-nums-content"),y=c.find(".crayon-nums-button"),E=c.find(".crayon-wrap-button"),I=c.find(".crayon-expand-button"),
Q=c.find(".crayon-popup-button"),R=c.find(".crayon-copy-button"),S=c.find(".crayon-plain-button");a[m]=c;a[m].toolbar=t;a[m].plain=n;a[m].info=l;a[m].main=A;a[m].table=p;a[m].code=v;a[m].title=x;a[m].tools=w;a[m].nums=u;a[m].nums_content=B;a[m].numsButton=y;a[m].wrapButton=E;a[m].expandButton=I;a[m].popup_button=Q;a[m].copy_button=R;a[m].plainButton=S;a[m].numsVisible=!0;a[m].wrapped=!1;a[m].plainVisible=!1;a[m].toolbar_delay=0;a[m].time=1;e(".crayon-plain").css("z-index",0);v=A.style();a[m].mainStyle=
{height:v&&v.height||"","max-height":v&&v.maxHeight||"","min-height":v&&v.minHeight||"",width:v&&v.width||"","max-width":v&&v.maxWidth||"","min-width":v&&v.minWidth||""};a[m].mainHeightAuto=""==a[m].mainStyle.height&&""==a[m].mainStyle["max-height"];var T,U=0;a[m].loading=!0;a[m].scrollBlockFix=!1;y.click(function(){CrayonSyntax.toggleNums(m)});E.click(function(){CrayonSyntax.toggleWrap(m)});I.click(function(){CrayonSyntax.toggleExpand(m)});S.click(function(){CrayonSyntax.togglePlain(m)});R.click(function(){CrayonSyntax.copyPlain(m)});
F(m);T=setInterval(function(){0!=u.filter('[data-settings~="hide"]').length?B.ready(function(){CrayonUtil.log("function"+m);CrayonSyntax.toggleNums(m,!0,!0)}):g(m);"undefined"==typeof a[m].expanded&&(10>Math.abs(a[m].main.outerWidth()-a[m].table.outerWidth())?a[m].expandButton.hide():a[m].expandButton.show());5==U&&(clearInterval(T),a[m].loading=!1);U++},300);K(m);e(".crayon-num",a[m]).each(function(){var a=e(this).attr("data-line"),a=e("#"+a),c=a.style("height");c&&a.attr("data-height",c)});A.css("position",
"relative");A.css("z-index",1);k=0!=c.filter('[data-settings~="touchscreen"]').length;k||(A.click(function(){s(m,"",!1)}),n.click(function(){s(m,"",!1)}),l.click(function(){s(m,"",!1)}));0==c.filter('[data-settings~="no-popup"]').length&&(a[m].popup_settings=popupWindow(Q,{height:screen.height-200,width:screen.width-100,top:75,left:50,scrollbars:1,windowURL:"",data:""},function(){z(m)},function(){}));n.css("opacity",0);a[m].toolbarVisible=!0;a[m].hasOneLine=p.outerHeight()<2*t.outerHeight();a[m].toolbarMouseover=
!1;0!=t.filter('[data-settings~="mouseover"]').length&&!k?(a[m].toolbarMouseover=!0,a[m].toolbarVisible=!1,t.css("margin-top","-"+t.outerHeight()+"px"),t.hide(),0!=t.filter('[data-settings~="overlay"]').length&&!a[m].hasOneLine?(t.css("position","absolute"),t.css("z-index",2),0!=t.filter('[data-settings~="hide"]').length&&(A.click(function(){D(m,void 0,void 0,0)}),n.click(function(){D(m,!1,void 0,0)}))):t.css("z-index",4),0!=t.filter('[data-settings~="delay"]').length&&(a[m].toolbar_delay=500),c.mouseenter(function(){D(m,
!0)}).mouseleave(function(){D(m,!1)})):k&&t.show();0==c.filter('[data-settings~="minimize"]').length&&b.minimize(m);0!=n.length&&!k&&(0!=n.filter('[data-settings~="dblclick"]').length?A.dblclick(function(){CrayonSyntax.togglePlain(m)}):0!=n.filter('[data-settings~="click"]').length?A.click(function(){CrayonSyntax.togglePlain(m)}):0!=n.filter('[data-settings~="mouseover"]').length&&(c.mouseenter(function(){CrayonSyntax.togglePlain(m,!0)}).mouseleave(function(){CrayonSyntax.togglePlain(m,!1)}),y.hide()),
0!=n.filter('[data-settings~="show-plain-default"]').length&&CrayonSyntax.togglePlain(m,!0));var P=0!=c.filter('[data-settings~="expand"]').length;!k&&0!=c.filter('[data-settings~="scroll-mouseover"]').length&&(A.css("overflow","hidden"),n.css("overflow","hidden"),c.mouseenter(function(){L(m,!0,P)}).mouseleave(function(){L(m,!1,P)}));P&&c.mouseenter(function(){M(m,!0)}).mouseleave(function(){M(m,!1)});0!=c.filter('[data-settings~="disable-anim"]').length&&(a[m].time=0);0!=c.filter('[data-settings~="wrap"]').length&&
(a[m].wrapped=!0);a[m].mac=c.hasClass("crayon-os-mac");g(m);f(m);r(m)}};var d=function(c){CrayonUtil.log(a);if("undefined"==typeof a[c])return a[c]=e("#"+c),CrayonUtil.log("make "+c),!0;CrayonUtil.log("no make "+c);return!1},z=function(c){if("undefined"==typeof a[c])return d(c);var g=a[c].popup_settings;if(!g.data){var f=a[c].clone(!0);f.removeClass("crayon-wrapped");a[c].wrapped&&e(".crayon-num",f).each(function(){var a=e(this).attr("data-line"),a=e("#"+a),c=a.attr("data-height"),c=c?c:"";"undefined"!=
typeof c&&(a.css("height",c),e(this).css("height",c))});f.find(".crayon-main").css("height","");var h="",h=a[c].plainVisible?f.find(".crayon-plain"):f.find(".crayon-main");g.data=b.getAllCSS()+'<body class="crayon-popup-window" style="padding:0; margin:0;"><div class="'+f.attr("class")+' crayon-popup">'+b.removeCssInline(b.getHtmlString(h))+"</div></body>"}};b.minimize=function(c){var g=e('<div class="crayon-minimize crayon-button"><div>');a[c].tools.append(g);a[c].origTitle=a[c].title.html();a[c].origTitle||
a[c].title.html(v.minimize);var d=function(){a[c].toolbarPreventHide=!1;g.remove();a[c].removeClass("crayon-minimized");a[c].title.html(a[c].origTitle);var d=a[c].toolbar;0!=d.filter('[data-settings~="never-show"]').length&&d.remove()};a[c].toolbar.click(d);g.click(d);a[c].addClass("crayon-minimized");a[c].toolbarPreventHide=!0;D(c,void 0,void 0,0)};b.getHtmlString=function(a){return e("<div>").append(a.clone()).remove().html()};b.removeCssInline=function(a){for(var g=/style\s*=\s*"([^"]+)"/gmi,d=
null;null!=(d=g.exec(a));){var f=d[1],f=f.replace(/\b(?:width|height)\s*:[^;]+;/gmi,"");a=a.sliceReplace(d.index,d.index+d[0].length,'style="'+f+'"')}return a};b.getAllCSS=function(){var a="",d=e('link[rel="stylesheet"]'),g=[],g=1==d.length?d:d.filter('[href*="crayon-syntax-highlighter"], [href*="min/"]');g.each(function(){var d=b.getHtmlString(e(this));a+=d});return a};b.copyPlain=function(c,g){if("undefined"==typeof a[c])return d(c);b.togglePlain(c,!0,!0);D(c,!0);var f=a[c].mac?"\u2318":"CTRL",
h=v.copy,h=h.replace(/%s/,f+"+C"),h=h.replace(/%s/,f+"+V");s(c,h);return!1};var s=function(c,g,f){if("undefined"==typeof a[c])return d(c);var h=a[c].info;"undefined"==typeof g&&(g="");"undefined"==typeof f&&(f=!0);y(h)&&f&&(h.html("<div>"+g+"</div>"),h.css("margin-top",-h.outerHeight()),h.show(),E(c,h,!0),setTimeout(function(){E(c,h,!1)},5E3));f||E(c,h,!1)},F=function(c){1<window.devicePixelRatio&&e(".crayon-button",a[c].toolbar).each(function(){var a=e(this).css("background-image").replace(/\.(?=[^\.]+$)/g,
"@2x.");e(this).css("background-size","48px 16px");e(this).css("background-image",a)})},y=function(a){var d="-"+a.outerHeight()+"px";return a.css("margin-top")==d||"none"==a.css("display")?!0:!1},E=function(a,d,g,f,h,t){var b=function(){t&&t(a,d)},l="-"+d.outerHeight()+"px";"undefined"==typeof g&&(g=y(d)?!0:!1);"undefined"==typeof f&&(f=100);!1==f&&(f=!1);"undefined"==typeof h&&(h=0);d.stop(!0);!0==g?(d.show(),d.animate({marginTop:0},x(f,a),b)):!1==g&&("0px"==d.css("margin-top")&&h&&d.delay(h),d.animate({marginTop:l},
x(f,a),function(){d.hide();b()}))};b.togglePlain=function(c,g,h){if("undefined"==typeof a[c])return d(c);var t=a[c].main,b=a[c].plain;if(!((t.is(":animated")||b.is(":animated"))&&"undefined"==typeof g)){a[c].plain.outerHeight(a[c].main.outerHeight());var l,e;"undefined"!=typeof g?g?(l=t,e=b):(l=b,e=t):1==t.css("z-index")?(l=t,e=b):(l=b,e=t);a[c].plainVisible=e==b;a[c].top=l.scrollTop();a[c].left=l.scrollLeft();a[c].scrollChanged=!1;K(c);l.stop(!0);l.fadeTo(x(500,c),0,function(){l.css("z-index",0)});
e.stop(!0);e.fadeTo(x(500,c),1,function(){e.css("z-index",1);e==b&&h&&b.select();e.scrollTop(a[c].top+1);e.scrollTop(a[c].top);e.scrollLeft(a[c].left+1);e.scrollLeft(a[c].left)});e.scrollTop(a[c].top);e.scrollLeft(a[c].left);f(c);D(c,!1);return!1}};b.toggleNums=function(c,f,h){if("undefined"==typeof a[c])return d(c),!1;if(a[c].table.is(":animated"))return!1;var t="-"+Math.round(a[c].nums_content.outerWidth()+1)+"px";("undefined"!=typeof f?0:a[c].table.css("margin-left")==t)?(f="0px",a[c].numsVisible=
!0):(a[c].table.css("margin-left","0px"),a[c].numsVisible=!1,f=t);if("undefined"!=typeof h)return a[c].table.css("margin-left",f),g(c),!1;var b=a[c].table.outerWidth()+B(a[c].table.css("margin-left"))>a[c].main.outerWidth(),l=a[c].table.outerHeight()>a[c].main.outerHeight();!b&&!l&&a[c].main.css("overflow","hidden");a[c].table.animate({marginLeft:f},x(200,c),function(){"undefined"!=typeof a[c]&&(g(c),!b&&!l&&a[c].main.css("overflow","auto"))});return!1};b.toggleWrap=function(c){a[c].wrapped=!a[c].wrapped;
r(c)};b.toggleExpand=function(c){var d=!CrayonUtil.setDefault(a[c].expanded,!1);M(c,d)};var r=function(c,d){d=CrayonUtil.setDefault(d,!0);a[c].wrapped?a[c].addClass("crayon-wrapped"):a[c].removeClass("crayon-wrapped");h(c);!a[c].expanded&&d&&I(c);a[c].wrapTimes=0;clearInterval(a[c].wrapTimer);a[c].wrapTimer=setInterval(function(){a[c].is(":visible")&&(A(c),a[c].wrapTimes++,5==a[c].wrapTimes&&clearInterval(a[c].wrapTimer))},200)},B=function(a){if("string"!=typeof a)return 0;a=a.replace(/[^-0-9]/g,
"");return 0==a.length?0:parseInt(a)},g=function(c){"undefined"==typeof a[c]||"undefined"==typeof a[c].numsVisible||(a[c].numsVisible?(a[c].numsButton.removeClass(""),a[c].numsButton.addClass("crayon-pressed")):(a[c].numsButton.removeClass("crayon-pressed"),a[c].numsButton.addClass("")))},h=function(c){"undefined"==typeof a[c]||"undefined"==typeof a[c].wrapped||(a[c].wrapped?(a[c].wrapButton.removeClass(""),a[c].wrapButton.addClass("crayon-pressed")):(a[c].wrapButton.removeClass("crayon-pressed"),
a[c].wrapButton.addClass("")))},t=function(c){"undefined"==typeof a[c]||"undefined"==typeof a[c].expanded||(a[c].expanded?(a[c].expandButton.removeClass(""),a[c].expandButton.addClass("crayon-pressed")):(a[c].expandButton.removeClass("crayon-pressed"),a[c].expandButton.addClass("")))},f=function(c){"undefined"==typeof a[c]||"undefined"==typeof a[c].plainVisible||(a[c].plainVisible?(a[c].plainButton.removeClass(""),a[c].plainButton.addClass("crayon-pressed")):(a[c].plainButton.removeClass("crayon-pressed"),
a[c].plainButton.addClass("")))},D=function(c,g,f,h){if("undefined"==typeof a[c])return d(c);if(a[c].toolbarMouseover&&!(!1==g&&a[c].toolbarPreventHide||k)){var t=a[c].toolbar;"undefined"==typeof h&&(h=a[c].toolbar_delay);E(c,t,g,f,h,function(){a[c].toolbarVisible=g})}},n=function(a,d){var g=e.extend({},a);g.width+=d.width;g.height+=d.height;return g},l=function(a,d){var g=e.extend({},a);g.width-=d.width;g.height-=d.height;return g},p=function(c){"undefined"==typeof a[c].initialSize&&(a[c].toolbarHeight=
a[c].toolbar.outerHeight(),a[c].innerSize={width:a[c].width(),height:a[c].height()},a[c].outerSize={width:a[c].outerWidth(),height:a[c].outerHeight()},a[c].borderSize=l(a[c].outerSize,a[c].innerSize),a[c].initialSize={width:a[c].main.outerWidth(),height:a[c].main.outerHeight()},a[c].initialSize.height+=a[c].toolbarHeight,a[c].initialOuterSize=n(a[c].initialSize,a[c].borderSize),a[c].finalSize={width:a[c].table.outerWidth(),height:a[c].table.outerHeight()},a[c].finalSize.height+=a[c].toolbarHeight,
a[c].finalSize.width=CrayonUtil.setMin(a[c].finalSize.width,a[c].initialSize.width),a[c].finalSize.height=CrayonUtil.setMin(a[c].finalSize.height,a[c].initialSize.height),a[c].diffSize=l(a[c].finalSize,a[c].initialSize),a[c].finalOuterSize=n(a[c].finalSize,a[c].borderSize),a[c].initialSize.height+=a[c].toolbar.outerHeight())},M=function(c,g){if("undefined"==typeof a[c])return d(c);if("undefined"!=typeof g){var f=a[c].main;if(g){if("undefined"==typeof a[c].expanded){p(c);a[c].expandTime=CrayonUtil.setRange(a[c].diffSize.width/
3,300,800);a[c].expanded=!1;var h=a[c].finalOuterSize;a[c].placeholder=e("<div></div>");a[c].placeholder.addClass("crayon-placeholder");a[c].placeholder.css(h);a[c].before(a[c].placeholder);a[c].placeholder.css("margin",a[c].css("margin"));e(window).bind("resize",w)}a[c].outerWidth(a[c].outerWidth());a[c].css({"min-width":"none","max-width":"none"});h={width:a[c].finalOuterSize.width};!a[c].mainHeightAuto&&!a[c].hasOneLine&&(h.height=a[c].finalOuterSize.height,a[c].outerHeight(a[c].outerHeight()));
f.css({height:"auto","min-height":"none","max-height":"none"});f.css({width:"auto","min-width":"none","max-width":"none"});a[c].stop(!0);a[c].animate(h,x(a[c].expandTime,c),function(){a[c].expanded=!0;t(c)});a[c].placeholder.show();e("body").prepend(a[c]);a[c].addClass("crayon-expanded crayon-toolbar-visible");w()}else f=a[c].initialOuterSize,h=a[c].toolbar_delay,f?(a[c].stop(!0),a[c].expanded||a[c].delay(h),h={width:f.width},!a[c].mainHeightAuto&&!a[c].hasOneLine&&(h.height=f.height),a[c].animate(h,
x(a[c].expandTime,c),function(){u(c)})):setTimeout(function(){u(c)},h),a[c].placeholder.hide(),a[c].placeholder.before(a[c]),a[c].css({left:"auto",top:"auto"}),a[c].removeClass("crayon-expanded crayon-toolbar-visible");a[c].plain.outerHeight(a[c].main.outerHeight());g&&r(c,!1)}},w=function(){for(uid in a)a[uid].hasClass("crayon-expanded crayon-toolbar-visible")&&a[uid].css(a[uid].placeholder.offset())},u=function(c){a[c].expanded=!1;I(c);t(c);a[c].wrapped&&r(c)},L=function(c,g,f){if("undefined"==
typeof a[c])return d(c);if(!("undefined"==typeof g||f||a[c].expanded)){f=a[c].main;var h=a[c].plain;g?(f.css("overflow","auto"),h.css("overflow","auto"),"undefined"!=typeof a[c].top&&(visible=1==f.css("z-index")?f:h,visible.scrollTop(a[c].top-1),visible.scrollTop(a[c].top),visible.scrollLeft(a[c].left-1),visible.scrollLeft(a[c].left))):(visible=1==f.css("z-index")?f:h,a[c].top=visible.scrollTop(),a[c].left=visible.scrollLeft(),f.css("overflow","hidden"),h.css("overflow","hidden"));a[c].scrollChanged=
!0;K(c)}},K=function(c){a[c].table.style("width","100%","important");var g=setTimeout(function(){a[c].table.style("width","");clearInterval(g)},10)},I=function(c){var g=a[c].mainStyle;a[c].main.css(g);a[c].css("height","auto");a[c].css("width",g.width);a[c].css("max-width",g["max-width"]);a[c].css("min-width",g["min-width"])},A=function(c){e(".crayon-num",a[c]).each(function(){var g=e(this).attr("data-line"),g=e("#"+g),d=null;a[c].wrapped?(g.css("height",""),d=(d=g.outerHeight())?d:""):(d=(d=g.attr("data-height"))?
d:"",g.css("height",d));e(this).css("height",d)})},x=function(c,g){if("fast"==c)c=200;else if("slow"==c)c=600;else if("number"!=typeof c&&(c=parseInt(c),isNaN(c)))return 0;return c*a[g].time}}})(jQueryCrayon);var jQueryCrayon=jQuery;
(function(e){e(document).ready(function(){CrayonUtil.init()});CrayonUtil=new function(){var b=this,a=null;b.init=function(){a=CrayonSyntaxSettings;b.initGET()};b.addPrefixToID=function(b){return b.replace(/^([#.])?(.*)$/,"$1"+a.prefix+"$2")};b.removePrefixFromID=function(b){return b.replace(RegExp("^[#.]?"+a.prefix,"i"),"")};b.cssElem=function(a){return e(b.addPrefixToID(a))};b.setDefault=function(a,b){return"undefined"==typeof a?b:a};b.setMax=function(a,b){return a<=b?a:b};b.setMin=function(a,b){return a>=
b?a:b};b.setRange=function(a,e,k){return b.setMax(b.setMin(a,e),k)};b.initFancybox=function(){fancyboxInit&&fancyboxInit(window,document,e,"crayonFancybox")};b.getExt=function(a){if(-1!=a.indexOf("."))return a=a.split("."),a=a.length?a[a.length-1]:""};b.initGET=function(){window.currentURL=window.location.protocol+"//"+window.location.host+window.location.pathname;window.currentDir=window.currentURL.substring(0,window.currentURL.lastIndexOf("/"));for(var a=window,b=document.location.search,b=b.split("+").join(" "),
e={},d,z=/[?&]?([^=]+)=([^&]*)/g;d=z.exec(b);)e[decodeURIComponent(d[1])]=decodeURIComponent(d[2]);a.GET=e};b.getAJAX=function(b,q){b.version=a.version;e.get(a.ajaxurl,b,q)};b.postAJAX=function(b,q){b.version=a.version;e.post(a.ajaxurl,b,q)};b.reload=function(){var a="?",b;for(b in window.GET)a+=b+"="+window.GET[b]+"&";window.location=window.currentURL+a};b.escape=function(a){return"function"==typeof encodeURIComponent?encodeURIComponent(a):"function"!=typeof escape?escape(a):a};b.log=function(b){"undefined"!=
typeof console&&a.debug&&console.log(b)};b.decode_html=function(a){return String(a).replace(/&amp;/g,"&").replace(/&lt;/g,"<").replace(/&gt;/g,">")};b.encode_html=function(a){return String(a).replace(/&/g,"&amp;").replace(/</g,"&lt;").replace(/>/g,"&gt;")};b.getReadableColor=function(a,b){b=e.extend({amount:0.5,xMulti:1,yMulti:1.5,normalizeHue:[20,180],normalizeHueXMulti:0.4,normalizeHueYMulti:1},b);var k=tinycolor(a).toHsv(),d=k.s,z=1-k.v,d=d*b.xMulti,z=z*b.yMulti;b.normalizeHue&&(k.h>b.normalizeHue[0]&&
k.h<b.normalizeHue[1])&&(d*=b.normalizeHueXMulti,z*=b.normalizeHueYMulti);Math.sqrt(Math.pow(d,2)+Math.pow(z,2))<b.amount?k.v=0:k.v=1;k.s=0;return tinycolor(k).toHexString()};b.removeChars=function(a,b){return b.replace(RegExp("["+a+"]","gmi"),"")}};e.fn.bindFirst=function(b,a){this.bind(b,a);var e=this.data("events")[b.split(".")[0]],q=e.pop();e.splice(0,0,q)};e.keys=function(b){var a=[],e;for(e in b)a.push(e);return a};RegExp.prototype.execAll=function(b){for(var a=[],e=null;null!=(e=this.exec(b));){var q=
[],k;for(k in e)parseInt(k)==k&&q.push(e[k]);a.push(q)}return a};RegExp.prototype.escape=function(b){return b.replace(/[-[\]{}()*+?.,\\^$|#\s]/g,"\\$&")};String.prototype.sliceReplace=function(b,a,e){return this.substring(0,b)+e+this.substring(a)};String.prototype.escape=function(){var b={"&":"&amp;","<":"&lt;",">":"&gt;"};return this.replace(/[&<>]/g,function(a){return b[a]||a})};String.prototype.linkify=function(b){return this.replace(/(http(s)?:\/\/(\S)+)/gmi,'<a href="$1" target="'+("undefined"!=
typeof b?b:"")+'">$1</a>')};String.prototype.toTitleCase=function(){var b=this.split(/\s+/),a="";e.each(b,function(e,q){""!=q&&(a+=q.slice(0,1).toUpperCase()+q.slice(1,q.length),e!=b.length-1&&""!=b[e+1]&&(a+=" "))});return a}})(jQueryCrayon);jqueryPopup={defaultSettings:{centerBrowser:0,centerScreen:0,height:500,left:0,location:0,menubar:0,resizable:0,scrollbars:0,status:0,width:500,windowName:null,windowURL:null,top:0,toolbar:0,data:null,event:"click"}};
(function(e){popupWindow=function(b,a,e,q){e="undefined"!==typeof e?e:null;q="undefined"!==typeof q?q:null;"string"==typeof b&&(b=jQuery(b));if(!(b instanceof jQuery))return!1;var k=jQuery.extend({},jqueryPopup.defaultSettings,a||{});b.handler=jQuery(b).bind(k.event,function(){e&&e();var a="height="+k.height+",width="+k.width+",toolbar="+k.toolbar+",scrollbars="+k.scrollbars+",status="+k.status+",resizable="+k.resizable+",location="+k.location+",menuBar="+k.menubar;k.windowName=k.windowName||jQuery(this).attr("name");
var b=jQuery(this).attr("href");!k.windowURL&&("#"!=b&&""!=b)&&(k.windowURL=jQuery(this).attr("href"));var s,b=null;k.centerBrowser?(jQuery.browser.msie?(b=window.screenTop-120+((document.documentElement.clientHeight+120)/2-k.height/2),s=window.screenLeft+((document.body.offsetWidth+20)/2-k.width/2)):(b=window.screenY+(window.outerHeight/2-k.height/2),s=window.screenX+(window.outerWidth/2-k.width/2)),b=window.open(k.windowURL,k.windowName,a+",left="+s+",top="+b)):k.centerScreen?(b=(screen.height-
k.height)/2,s=(screen.width-k.width)/2,b=window.open(k.windowURL,k.windowName,a+",left="+s+",top="+b)):b=window.open(k.windowURL,k.windowName,a+",left="+k.left+",top="+k.top);null!=b&&(b.focus(),k.data&&b.document.write(k.data));q&&q()});return k};popdownWindow=function(b,a){"undefined"==typeof a&&(a="click");b=jQuery(b);if(!(b instanceof jQuery))return!1;b.unbind(a,b.handler)}})(jQueryCrayon);window.fancyboxInit=function(e,b,a,v){var q=a(e),k=a(b),d=a[v]=function(){d.open.apply(this,arguments)},z=null,s=void 0!==b.createTouch,F=function(g){return g&&g.hasOwnProperty&&g instanceof a},y=function(g){return g&&"string"===a.type(g)},E=function(a){return y(a)&&0<a.indexOf("%")},r=function(a,h){var b=parseInt(a,10)||0;h&&E(a)&&(b*=d.getViewport()[h]/100);return Math.ceil(b)},B=function(a,d){return r(a,d)+"px"};a.extend(d,{version:"2.1.3",defaults:{padding:15,margin:20,width:800,height:600,minWidth:100,
minHeight:100,maxWidth:9999,maxHeight:9999,autoSize:!0,autoHeight:!1,autoWidth:!1,autoResize:!0,autoCenter:!s,fitToView:!0,aspectRatio:!1,topRatio:0.5,leftRatio:0.5,scrolling:"auto",wrapCSS:"",arrows:!0,closeBtn:!0,closeClick:!1,nextClick:!1,mouseWheel:!0,autoPlay:!1,playSpeed:3E3,preload:3,modal:!1,loop:!0,ajax:{dataType:"html",headers:{"X-fancyBox":!0}},iframe:{scrolling:"auto",preload:!0},swf:{wmode:"transparent",allowfullscreen:"true",allowscriptaccess:"always"},keys:{next:{13:"left",34:"up",
39:"left",40:"up"},prev:{8:"right",33:"down",37:"right",38:"down"},close:[27],play:[32],toggle:[70]},direction:{next:"left",prev:"right"},scrollOutside:!0,index:0,type:null,href:null,content:null,title:null,tpl:{wrap:'<div class="fancybox-wrap" tabIndex="-1"><div class="fancybox-skin"><div class="fancybox-outer"><div class="fancybox-inner"></div></div></div></div>',image:'<img class="fancybox-image" src="{href}" alt="" />',iframe:'<iframe id="fancybox-frame{rnd}" name="fancybox-frame{rnd}" class="fancybox-iframe" frameborder="0" vspace="0" hspace="0" webkitAllowFullScreen mozallowfullscreen allowFullScreen'+
(a.browser.msie?' allowtransparency="true"':"")+"></iframe>",error:'<p class="fancybox-error">The requested content cannot be loaded.<br/>Please try again later.</p>',closeBtn:'<a title="Close" class="fancybox-item fancybox-close" href="javascript:;"></a>',next:'<a title="Next" class="fancybox-nav fancybox-next" href="javascript:;"><span></span></a>',prev:'<a title="Previous" class="fancybox-nav fancybox-prev" href="javascript:;"><span></span></a>'},openEffect:"fade",openSpeed:250,openEasing:"swing",
openOpacity:!0,openMethod:"zoomIn",closeEffect:"fade",closeSpeed:250,closeEasing:"swing",closeOpacity:!0,closeMethod:"zoomOut",nextEffect:"elastic",nextSpeed:250,nextEasing:"swing",nextMethod:"changeIn",prevEffect:"elastic",prevSpeed:250,prevEasing:"swing",prevMethod:"changeOut",helpers:{overlay:!0,title:!0},onCancel:a.noop,beforeLoad:a.noop,afterLoad:a.noop,beforeShow:a.noop,afterShow:a.noop,beforeChange:a.noop,beforeClose:a.noop,afterClose:a.noop},group:{},opts:{},previous:null,coming:null,current:null,
isActive:!1,isOpen:!1,isOpened:!1,wrap:null,skin:null,outer:null,inner:null,player:{timer:null,isActive:!1},ajaxLoad:null,imgPreload:null,transitions:{},helpers:{},open:function(g,h){if(g&&(a.isPlainObject(h)||(h={}),!1!==d.close(!0)))return a.isArray(g)||(g=F(g)?a(g).get():[g]),a.each(g,function(b,f){var e={},n,l,p,k,q;"object"===a.type(f)&&(f.nodeType&&(f=a(f)),F(f)?(e={href:f.data("fancybox-href")||f.attr("href"),title:f.data("fancybox-title")||f.attr("title"),isDom:!0,element:f},a.metadata&&a.extend(!0,
e,f.metadata())):e=f);n=h.href||e.href||(y(f)?f:null);l=void 0!==h.title?h.title:e.title||"";k=(p=h.content||e.content)?"html":h.type||e.type;!k&&e.isDom&&(k=f.data("fancybox-type"),k||(k=(k=f.prop("class").match(/fancybox\.(\w+)/))?k[1]:null));y(n)&&(k||(d.isImage(n)?k="image":d.isSWF(n)?k="swf":"#"===n.charAt(0)?k="inline":y(f)&&(k="html",p=f)),"ajax"===k&&(q=n.split(/\s+/,2),n=q.shift(),q=q.shift()));p||("inline"===k?n?p=a(y(n)?n.replace(/.*(?=#[^\s]+$)/,""):n):e.isDom&&(p=f):"html"===k?p=n:!k&&
(!n&&e.isDom)&&(k="inline",p=f));a.extend(e,{href:n,type:k,content:p,title:l,selector:q});g[b]=e}),d.opts=a.extend(!0,{},d.defaults,h),void 0!==h.keys&&(d.opts.keys=h.keys?a.extend({},d.defaults.keys,h.keys):!1),d.group=g,d._start(d.opts.index)},cancel:function(){var a=d.coming;a&&!1!==d.trigger("onCancel")&&(d.hideLoading(),d.ajaxLoad&&d.ajaxLoad.abort(),d.ajaxLoad=null,d.imgPreload&&(d.imgPreload.onload=d.imgPreload.onerror=null),a.wrap&&a.wrap.stop(!0,!0).trigger("onReset").remove(),d.coming=null,
d.current||d._afterZoomOut(a))},close:function(g){d.cancel();!1!==d.trigger("beforeClose")&&(d.unbindEvents(),d.isActive&&(!d.isOpen||!0===g?(a(".fancybox-wrap").stop(!0).trigger("onReset").remove(),d._afterZoomOut()):(d.isOpen=d.isOpened=!1,d.isClosing=!0,a(".fancybox-item, .fancybox-nav").remove(),d.wrap.stop(!0,!0).removeClass("fancybox-opened"),d.transitions[d.current.closeMethod]())))},play:function(g){var h=function(){clearTimeout(d.player.timer)},b=function(){h();d.current&&d.player.isActive&&
(d.player.timer=setTimeout(d.next,d.current.playSpeed))},f=function(){h();a("body").unbind(".player");d.player.isActive=!1;d.trigger("onPlayEnd")};if(!0===g||!d.player.isActive&&!1!==g){if(d.current&&(d.current.loop||d.current.index<d.group.length-1))d.player.isActive=!0,a("body").bind({"afterShow.player onUpdate.player":b,"onCancel.player beforeClose.player":f,"beforeLoad.player":h}),b(),d.trigger("onPlayStart")}else f()},next:function(a){var h=d.current;h&&(y(a)||(a=h.direction.next),d.jumpto(h.index+
1,a,"next"))},prev:function(a){var h=d.current;h&&(y(a)||(a=h.direction.prev),d.jumpto(h.index-1,a,"prev"))},jumpto:function(a,h,b){var f=d.current;f&&(a=r(a),d.direction=h||f.direction[a>=f.index?"next":"prev"],d.router=b||"jumpto",f.loop&&(0>a&&(a=f.group.length+a%f.group.length),a%=f.group.length),void 0!==f.group[a]&&(d.cancel(),d._start(a)))},reposition:function(g,h){var b=d.current,f=b?b.wrap:null,e;f&&(e=d._getPosition(h),g&&"scroll"===g.type?(delete e.position,f.stop(!0,!0).animate(e,200)):
(f.css(e),b.pos=a.extend({},b.dim,e)))},update:function(a){var h=a&&a.type,b=!h||"orientationchange"===h;b&&(clearTimeout(z),z=null);d.isOpen&&!z&&(z=setTimeout(function(){var f=d.current;f&&!d.isClosing&&(d.wrap.removeClass("fancybox-tmp"),(b||"load"===h||"resize"===h&&f.autoResize)&&d._setDimension(),"scroll"===h&&f.canShrink||d.reposition(a),d.trigger("onUpdate"),z=null)},b&&!s?0:300))},toggle:function(g){d.isOpen&&(d.current.fitToView="boolean"===a.type(g)?g:!d.current.fitToView,s&&(d.wrap.removeAttr("style").addClass("fancybox-tmp"),
d.trigger("onUpdate")),d.update())},hideLoading:function(){k.unbind(".loading");a("#fancybox-loading").remove()},showLoading:function(){var g,h;d.hideLoading();g=a('<div id="fancybox-loading"><div></div></div>').click(d.cancel).appendTo("body");k.bind("keydown.loading",function(a){if(27===(a.which||a.keyCode))a.preventDefault(),d.cancel()});d.defaults.fixed||(h=d.getViewport(),g.css({position:"absolute",top:0.5*h.h+h.y,left:0.5*h.w+h.x}))},getViewport:function(){var a=d.current&&d.current.locked||
!1,h={x:q.scrollLeft(),y:q.scrollTop()};a?(h.w=a[0].clientWidth,h.h=a[0].clientHeight):(h.w=s&&e.innerWidth?e.innerWidth:q.width(),h.h=s&&e.innerHeight?e.innerHeight:q.height());return h},unbindEvents:function(){d.wrap&&F(d.wrap)&&d.wrap.unbind(".fb");k.unbind(".fb");q.unbind(".fb")},bindEvents:function(){var g=d.current,h;g&&(q.bind("orientationchange.fb"+(s?"":" resize.fb")+(g.autoCenter&&!g.locked?" scroll.fb":""),d.update),(h=g.keys)&&k.bind("keydown.fb",function(b){var f=b.which||b.keyCode,e=
b.target||b.srcElement;if(27===f&&d.coming)return!1;!b.ctrlKey&&(!b.altKey&&!b.shiftKey&&!b.metaKey&&(!e||!e.type&&!a(e).is("[contenteditable]")))&&a.each(h,function(h,e){if(1<g.group.length&&void 0!==e[f])return d[h](e[f]),b.preventDefault(),!1;if(-1<a.inArray(f,e))return d[h](),b.preventDefault(),!1})}),a.fn.mousewheel&&g.mouseWheel&&d.wrap.bind("mousewheel.fb",function(h,f,b,e){for(var l=a(h.target||null),k=!1;l.length&&!k&&!l.is(".fancybox-skin")&&!l.is(".fancybox-wrap");)k=l[0]&&!(l[0].style.overflow&&
"hidden"===l[0].style.overflow)&&(l[0].clientWidth&&l[0].scrollWidth>l[0].clientWidth||l[0].clientHeight&&l[0].scrollHeight>l[0].clientHeight),l=a(l).parent();if(0!==f&&!k&&1<d.group.length&&!g.canShrink){if(0<e||0<b)d.prev(0<e?"down":"left");else if(0>e||0>b)d.next(0>e?"up":"right");h.preventDefault()}}))},trigger:function(g,h){var b,f=h||d.coming||d.current;if(f){a.isFunction(f[g])&&(b=f[g].apply(f,Array.prototype.slice.call(arguments,1)));if(!1===b)return!1;f.helpers&&a.each(f.helpers,function(h,
b){b&&(d.helpers[h]&&a.isFunction(d.helpers[h][g]))&&(b=a.extend(!0,{},d.helpers[h].defaults,b),d.helpers[h][g](b,f))});a.event.trigger(g+".fb")}},isImage:function(a){return y(a)&&a.match(/(^data:image\/.*,)|(\.(jp(e|g|eg)|gif|png|bmp|webp)((\?|#).*)?$)/i)},isSWF:function(a){return y(a)&&a.match(/\.(swf)((\?|#).*)?$/i)},_start:function(g){var h={},b,f;g=r(g);b=d.group[g]||null;if(!b)return!1;h=a.extend(!0,{},d.opts,b);b=h.margin;f=h.padding;"number"===a.type(b)&&(h.margin=[b,b,b,b]);"number"===a.type(f)&&
(h.padding=[f,f,f,f]);h.modal&&a.extend(!0,h,{closeBtn:!1,closeClick:!1,nextClick:!1,arrows:!1,mouseWheel:!1,keys:null,helpers:{overlay:{closeClick:!1}}});h.autoSize&&(h.autoWidth=h.autoHeight=!0);"auto"===h.width&&(h.autoWidth=!0);"auto"===h.height&&(h.autoHeight=!0);h.group=d.group;h.index=g;d.coming=h;if(!1===d.trigger("beforeLoad"))d.coming=null;else{f=h.type;b=h.href;if(!f)return d.coming=null,d.current&&d.router&&"jumpto"!==d.router?(d.current.index=g,d[d.router](d.direction)):!1;d.isActive=
!0;if("image"===f||"swf"===f)h.autoHeight=h.autoWidth=!1,h.scrolling="visible";"image"===f&&(h.aspectRatio=!0);"iframe"===f&&s&&(h.scrolling="scroll");h.wrap=a(h.tpl.wrap).addClass("fancybox-"+(s?"mobile":"desktop")+" fancybox-type-"+f+" fancybox-tmp "+h.wrapCSS).appendTo(h.parent||"body");a.extend(h,{skin:a(".fancybox-skin",h.wrap),outer:a(".fancybox-outer",h.wrap),inner:a(".fancybox-inner",h.wrap)});a.each(["Top","Right","Bottom","Left"],function(a,d){h.skin.css("padding"+d,B(h.padding[a]))});d.trigger("onReady");
if("inline"===f||"html"===f){if(!h.content||!h.content.length)return d._error("content")}else if(!b)return d._error("href");"image"===f?d._loadImage():"ajax"===f?d._loadAjax():"iframe"===f?d._loadIframe():d._afterLoad()}},_error:function(g){a.extend(d.coming,{type:"html",autoWidth:!0,autoHeight:!0,minWidth:0,minHeight:0,scrolling:"no",hasError:g,content:d.coming.tpl.error});d._afterLoad()},_loadImage:function(){var a=d.imgPreload=new Image;a.onload=function(){this.onload=this.onerror=null;d.coming.width=
this.width;d.coming.height=this.height;d._afterLoad()};a.onerror=function(){this.onload=this.onerror=null;d._error("image")};a.src=d.coming.href;!0!==a.complete&&d.showLoading()},_loadAjax:function(){var g=d.coming;d.showLoading();d.ajaxLoad=a.ajax(a.extend({},g.ajax,{url:g.href,error:function(a,g){d.coming&&"abort"!==g?d._error("ajax",a):d.hideLoading()},success:function(a,b){"success"===b&&(g.content=a,d._afterLoad())}}))},_loadIframe:function(){var g=d.coming,b=a(g.tpl.iframe.replace(/\{rnd\}/g,
(new Date).getTime())).attr("scrolling",s?"auto":g.iframe.scrolling).attr("src",g.href);a(g.wrap).bind("onReset",function(){try{a(this).find("iframe").hide().attr("src","//about:blank").end().empty()}catch(d){}});g.iframe.preload&&(d.showLoading(),b.one("load",function(){a(this).data("ready",1);s||a(this).bind("load.fb",d.update);a(this).parents(".fancybox-wrap").width("100%").removeClass("fancybox-tmp").show();d._afterLoad()}));g.content=b.appendTo(g.inner);g.iframe.preload||d._afterLoad()},_preloadImages:function(){var a=
d.group,b=d.current,e=a.length,f=b.preload?Math.min(b.preload,e-1):0,k,n;for(n=1;n<=f;n+=1)k=a[(b.index+n)%e],"image"===k.type&&k.href&&((new Image).src=k.href)},_afterLoad:function(){var g=d.coming,b=d.current,e,f,k,n,l;d.hideLoading();if(g&&!1!==d.isActive)if(!1===d.trigger("afterLoad",g,b))g.wrap.stop(!0).trigger("onReset").remove(),d.coming=null;else{b&&(d.trigger("beforeChange",b),b.wrap.stop(!0).removeClass("fancybox-opened").find(".fancybox-item, .fancybox-nav").remove());d.unbindEvents();
e=g.content;f=g.type;k=g.scrolling;a.extend(d,{wrap:g.wrap,skin:g.skin,outer:g.outer,inner:g.inner,current:g,previous:b});n=g.href;switch(f){case "inline":case "ajax":case "html":g.selector?e=a("<div>").html(e).find(g.selector):F(e)&&(e.data("fancybox-placeholder")||e.data("fancybox-placeholder",a('<div class="fancybox-placeholder"></div>').insertAfter(e).hide()),e=e.show().detach(),g.wrap.bind("onReset",function(){a(this).find(e).length&&e.hide().replaceAll(e.data("fancybox-placeholder")).data("fancybox-placeholder",
!1)}));break;case "image":e=g.tpl.image.replace("{href}",n);break;case "swf":e='<object id="fancybox-swf" classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000" width="100%" height="100%"><param name="movie" value="'+n+'"></param>',l="",a.each(g.swf,function(a,d){e+='<param name="'+a+'" value="'+d+'"></param>';l+=" "+a+'="'+d+'"'}),e+='<embed src="'+n+'" type="application/x-shockwave-flash" width="100%" height="100%"'+l+"></embed></object>"}(!F(e)||!e.parent().is(g.inner))&&g.inner.append(e);d.trigger("beforeShow");
g.inner.css("overflow","yes"===k?"scroll":"no"===k?"hidden":k);d._setDimension();d.reposition();d.isOpen=!1;d.coming=null;d.bindEvents();if(d.isOpened){if(b.prevMethod)d.transitions[b.prevMethod]()}else a(".fancybox-wrap").not(g.wrap).stop(!0).trigger("onReset").remove();d.transitions[d.isOpened?g.nextMethod:g.openMethod]();d._preloadImages()}},_setDimension:function(){var g=d.getViewport(),b=0,e=!1,f=!1,e=d.wrap,k=d.skin,n=d.inner,l=d.current,f=l.width,p=l.height,q=l.minWidth,w=l.minHeight,u=l.maxWidth,
s=l.maxHeight,v=l.scrolling,y=l.scrollOutside?l.scrollbarWidth:0,A=l.margin,x=r(A[1]+A[3]),c=r(A[0]+A[2]),O,m,C,H,G,N,z,J,F;e.add(k).add(n).width("auto").height("auto").removeClass("fancybox-tmp");A=r(k.outerWidth(!0)-k.width());O=r(k.outerHeight(!0)-k.height());m=x+A;C=c+O;H=E(f)?(g.w-m)*r(f)/100:f;G=E(p)?(g.h-C)*r(p)/100:p;if("iframe"===l.type){if(F=l.content,l.autoHeight&&1===F.data("ready"))try{F[0].contentWindow.document.location&&(n.width(H).height(9999),N=F.contents().find("body"),y&&N.css("overflow-x",
"hidden"),G=N.height())}catch(V){}}else if(l.autoWidth||l.autoHeight)n.addClass("fancybox-tmp"),l.autoWidth||n.width(H),l.autoHeight||n.height(G),l.autoWidth&&(H=n.width()),l.autoHeight&&(G=n.height()),n.removeClass("fancybox-tmp");f=r(H);p=r(G);J=H/G;q=r(E(q)?r(q,"w")-m:q);u=r(E(u)?r(u,"w")-m:u);w=r(E(w)?r(w,"h")-C:w);s=r(E(s)?r(s,"h")-C:s);N=u;z=s;l.fitToView&&(u=Math.min(g.w-m,u),s=Math.min(g.h-C,s));m=g.w-x;c=g.h-c;l.aspectRatio?(f>u&&(f=u,p=r(f/J)),p>s&&(p=s,f=r(p*J)),f<q&&(f=q,p=r(f/J)),p<w&&
(p=w,f=r(p*J))):(f=Math.max(q,Math.min(f,u)),l.autoHeight&&"iframe"!==l.type&&(n.width(f),p=n.height()),p=Math.max(w,Math.min(p,s)));if(l.fitToView)if(n.width(f).height(p),e.width(f+A),g=e.width(),x=e.height(),l.aspectRatio)for(;(g>m||x>c)&&(f>q&&p>w)&&!(19<b++);)p=Math.max(w,Math.min(s,p-10)),f=r(p*J),f<q&&(f=q,p=r(f/J)),f>u&&(f=u,p=r(f/J)),n.width(f).height(p),e.width(f+A),g=e.width(),x=e.height();else f=Math.max(q,Math.min(f,f-(g-m))),p=Math.max(w,Math.min(p,p-(x-c)));y&&("auto"===v&&p<G&&f+A+
y<m)&&(f+=y);n.width(f).height(p);e.width(f+A);g=e.width();x=e.height();e=(g>m||x>c)&&f>q&&p>w;f=l.aspectRatio?f<N&&p<z&&f<H&&p<G:(f<N||p<z)&&(f<H||p<G);a.extend(l,{dim:{width:B(g),height:B(x)},origWidth:H,origHeight:G,canShrink:e,canExpand:f,wPadding:A,hPadding:O,wrapSpace:x-k.outerHeight(!0),skinSpace:k.height()-p});!F&&(l.autoHeight&&p>w&&p<s&&!f)&&n.height("auto")},_getPosition:function(a){var b=d.current,e=d.getViewport(),f=b.margin,k=d.wrap.width()+f[1]+f[3],n=d.wrap.height()+f[0]+f[2],f={position:"absolute",
top:f[0],left:f[3]};b.autoCenter&&b.fixed&&!a&&n<=e.h&&k<=e.w?f.position="fixed":b.locked||(f.top+=e.y,f.left+=e.x);f.top=B(Math.max(f.top,f.top+(e.h-n)*b.topRatio));f.left=B(Math.max(f.left,f.left+(e.w-k)*b.leftRatio));return f},_afterZoomIn:function(){var b=d.current;b&&(d.isOpen=d.isOpened=!0,d.wrap.css("overflow","visible").addClass("fancybox-opened"),d.update(),(b.closeClick||b.nextClick&&1<d.group.length)&&d.inner.css("cursor","pointer").bind("click.fb",function(e){!a(e.target).is("a")&&!a(e.target).parent().is("a")&&
(e.preventDefault(),d[b.closeClick?"close":"next"]())}),b.closeBtn&&a(b.tpl.closeBtn).appendTo(d.skin).bind(s?"touchstart.fb":"click.fb",function(a){a.preventDefault();d.close()}),b.arrows&&1<d.group.length&&((b.loop||0<b.index)&&a(b.tpl.prev).appendTo(d.outer).bind("click.fb",d.prev),(b.loop||b.index<d.group.length-1)&&a(b.tpl.next).appendTo(d.outer).bind("click.fb",d.next)),d.trigger("afterShow"),!b.loop&&b.index===b.group.length-1?d.play(!1):d.opts.autoPlay&&!d.player.isActive&&(d.opts.autoPlay=
!1,d.play()))},_afterZoomOut:function(b){b=b||d.current;a(".fancybox-wrap").trigger("onReset").remove();a.extend(d,{group:{},opts:{},router:!1,current:null,isActive:!1,isOpened:!1,isOpen:!1,isClosing:!1,wrap:null,skin:null,outer:null,inner:null});d.trigger("afterClose",b)}});d.transitions={getOrigPosition:function(){var a=d.current,b=a.element,e=a.orig,f={},k=50,n=50,l=a.hPadding,p=a.wPadding,q=d.getViewport();!e&&(a.isDom&&b.is(":visible"))&&(e=b.find("img:first"),e.length||(e=b));F(e)?(f=e.offset(),
e.is("img")&&(k=e.outerWidth(),n=e.outerHeight())):(f.top=q.y+(q.h-n)*a.topRatio,f.left=q.x+(q.w-k)*a.leftRatio);if("fixed"===d.wrap.css("position")||a.locked)f.top-=q.y,f.left-=q.x;return f={top:B(f.top-l*a.topRatio),left:B(f.left-p*a.leftRatio),width:B(k+p),height:B(n+l)}},step:function(a,b){var e,f,k=b.prop;f=d.current;var n=f.wrapSpace,l=f.skinSpace;if("width"===k||"height"===k)e=b.end===b.start?1:(a-b.start)/(b.end-b.start),d.isClosing&&(e=1-e),f="width"===k?f.wPadding:f.hPadding,f=a-f,d.skin[k](r("width"===
k?f:f-n*e)),d.inner[k](r("width"===k?f:f-n*e-l*e))},zoomIn:function(){var b=d.current,e=b.pos,k=b.openEffect,f="elastic"===k,q=a.extend({opacity:1},e);delete q.position;f?(e=this.getOrigPosition(),b.openOpacity&&(e.opacity=0.1)):"fade"===k&&(e.opacity=0.1);d.wrap.css(e).animate(q,{duration:"none"===k?0:b.openSpeed,easing:b.openEasing,step:f?this.step:null,complete:d._afterZoomIn})},zoomOut:function(){var a=d.current,b=a.closeEffect,e="elastic"===b,f={opacity:0.1};e&&(f=this.getOrigPosition(),a.closeOpacity&&
(f.opacity=0.1));d.wrap.animate(f,{duration:"none"===b?0:a.closeSpeed,easing:a.closeEasing,step:e?this.step:null,complete:d._afterZoomOut})},changeIn:function(){var a=d.current,b=a.nextEffect,e=a.pos,f={opacity:1},k=d.direction,n;e.opacity=0.1;"elastic"===b&&(n="down"===k||"up"===k?"top":"left","down"===k||"right"===k?(e[n]=B(r(e[n])-200),f[n]="+=200px"):(e[n]=B(r(e[n])+200),f[n]="-=200px"));"none"===b?d._afterZoomIn():d.wrap.css(e).animate(f,{duration:a.nextSpeed,easing:a.nextEasing,complete:function(){setTimeout(d._afterZoomIn,
20)}})},changeOut:function(){var b=d.previous,e=b.prevEffect,k={opacity:0.1},f=d.direction;"elastic"===e&&(k["down"===f||"up"===f?"top":"left"]=("up"===f||"left"===f?"-":"+")+"=200px");b.wrap.animate(k,{duration:"none"===e?0:b.prevSpeed,easing:b.prevEasing,complete:function(){a(this).trigger("onReset").remove()}})}};d.helpers.overlay={defaults:{closeClick:!0,speedOut:200,showEarly:!0,css:{},locked:!s,fixed:!0},overlay:null,fixed:!1,create:function(b){b=a.extend({},this.defaults,b);this.overlay&&this.close();
this.overlay=a('<div class="fancybox-overlay"></div>').appendTo("body");this.fixed=!1;b.fixed&&d.defaults.fixed&&(this.overlay.addClass("fancybox-overlay-fixed"),this.fixed=!0)},open:function(b){var e=this;b=a.extend({},this.defaults,b);this.overlay?this.overlay.unbind(".overlay").width("auto").height("auto"):this.create(b);this.fixed||(q.bind("resize.overlay",a.proxy(this.update,this)),this.update());b.closeClick&&this.overlay.bind("click.overlay",function(b){a(b.target).hasClass("fancybox-overlay")&&
(d.isActive?d.close():e.close())});this.overlay.css(b.css).show()},close:function(){a(".fancybox-overlay").remove();q.unbind("resize.overlay");this.overlay=null;!1!==this.margin&&(a("body").css("margin-right",this.margin),this.margin=!1);this.el&&this.el.removeClass("fancybox-lock")},update:function(){var d="100%",e;this.overlay.width(d).height("100%");a.browser.msie?(e=Math.max(b.documentElement.offsetWidth,b.body.offsetWidth),k.width()>e&&(d=k.width())):k.width()>q.width()&&(d=k.width());this.overlay.width(d).height(k.height())},
onReady:function(d,e){a(".fancybox-overlay").stop(!0,!0);this.overlay||(this.margin=k.height()>q.height()||"scroll"===a("body").css("overflow-y")?a("body").css("margin-right"):!1,this.el=b.all&&!b.querySelector?a("html"):a("body"),this.create(d));d.locked&&this.fixed&&(e.locked=this.overlay.append(e.wrap),e.fixed=!1);!0===d.showEarly&&this.beforeShow.apply(this,arguments)},beforeShow:function(b,d){d.locked&&(this.el.addClass("fancybox-lock"),!1!==this.margin&&a("body").css("margin-right",r(this.margin)+
d.scrollbarWidth));this.open(b)},onUpdate:function(){this.fixed||this.update()},afterClose:function(b){this.overlay&&!d.isActive&&this.overlay.fadeOut(b.speedOut,a.proxy(this.close,this))}};d.helpers.title={defaults:{type:"float",position:"bottom"},beforeShow:function(b){var e=d.current,k=e.title,f=b.type;a.isFunction(k)&&(k=k.call(e.element,e));if(y(k)&&""!==a.trim(k)){e=a('<div class="fancybox-title fancybox-title-'+f+'-wrap">'+k+"</div>");switch(f){case "inside":f=d.skin;break;case "outside":f=
d.wrap;break;case "over":f=d.inner;break;default:f=d.skin,e.appendTo("body"),a.browser.msie&&e.width(e.width()),e.wrapInner('<span class="child"></span>'),d.current.margin[2]+=Math.abs(r(e.css("margin-bottom")))}e["top"===b.position?"prependTo":"appendTo"](f)}}};a.fn[v]=function(b){var e,q=a(this),f=this.selector||"",r=function(k){var l=a(this).blur(),p=e,r,s;!k.ctrlKey&&(!k.altKey&&!k.shiftKey&&!k.metaKey)&&!l.is(".fancybox-wrap")&&(r=b.groupAttr||"data-fancybox-group",s=l.attr(r),s||(r="rel",s=
l.get(0)[r]),s&&(""!==s&&"nofollow"!==s)&&(l=f.length?a(f):q,l=l.filter("["+r+'="'+s+'"]'),p=l.index(this)),b.index=p,!1!==d.open(l,b)&&k.preventDefault())};b=b||{};e=b.index||0;!f||!1===b.live?q.unbind("click.fb-start").bind("click.fb-start",r):k.undelegate(f,"click.fb-start").delegate(f+":not('.fancybox-item, .fancybox-nav')","click.fb-start",r);this.filter("[data-fancybox-start=1]").trigger("click");return this};k.ready(function(){void 0===a.scrollbarWidth&&(a.scrollbarWidth=function(){var b=a('<div style="width:50px;height:50px;overflow:auto"><div/></div>').appendTo("body"),
d=b.children(),d=d.innerWidth()-d.height(99).innerWidth();b.remove();return d});void 0===a.support.fixedPosition&&(a.support.fixedPosition=function(){var b=a('<div style="position:fixed;top:20px;"></div>').appendTo("body"),d=20===b[0].offsetTop||15===b[0].offsetTop;b.remove();return d}());a.extend(d.defaults,{scrollbarWidth:a.scrollbarWidth(),fixed:a.support.fixedPosition,parent:a("body")})})};(function(e){window.CrayonQuickTags=new function(){var b=this;b.init=function(){b.sel='*[id*="crayon_quicktag"],*[class*="crayon_quicktag"]';CrayonTagEditor.bind(b.sel);QTags.addButton("crayon_quicktag","crayon",function(){CrayonTagEditor.showDialog({insert:function(a){QTags.insertContent(a)},select:b.getSelectedText,editor_str:"html",output:"encode"});e(b.sel).removeClass("qt_crayon_highlight")});var a,v=setInterval(function(){a=e(b.sel).first();"undefined"!=typeof a&&clearInterval(v)},100)};b.getSelectedText=
function(){if(0==QTags.instances.length)return null;var a=QTags.instances[0];return a.canvas.value.substring(a.canvas.selectionStart,a.canvas.selectionEnd)}};e(document).ready(function(){CrayonQuickTags.init()})})(jQueryCrayon);(function(e){window.CrayonTagEditor=new function(){var b=this,a=!1,v=!1,q=!1,k,d,z,s,F,y,E,r,B,g=0,h,t,f=null,D="",n=!1,l,p,M,w,u,L,K,I;b.init=function(){l=CrayonTagEditorSettings;p=CrayonSyntaxSettings;M=CrayonUtil};b.bind=function(d){a||(a=!0,b.init());b.loadDialog();e(d).crayonFancybox({href:l.content_css,margin:[40,10,40,10],padding:0,width:690,height:"100%",autoSize:!1,title:"",beforeShow:function(){e(this.outer).prepend(e(l.bar_content))},afterShow:function(){e(l.code_css).focus()},beforeClose:function(){e(l.bar).prepend(e(l.bar_content))},
closeBtn:!1})};b.hide=function(){e.crayonFancybox.close();return!1};b.loadDialog=function(){v||(v=!0,M.initFancybox(),CrayonUtil.getAJAX({action:"crayon-tag-editor",is_admin:p.is_admin},function(a){w=e('<div id="'+l.css+'"></div>');w.appendTo("body").hide();w.html(a);b.setOrigValues();K=w.find(l.submit_css);I=w.find(l.cancel_css);u=e(l.code_css);L=e("#crayon-te-clear");h=function(){var a=L.is(":visible");0<u.val().length&&!a?(L.show(),u.removeClass(p.selected)):0>=u.val().length&&L.hide()};u.keyup(h);
u.change(h);L.click(function(){u.val("");u.removeClass(p.selected);u.focus()});var d=e(l.url_css),c=e(l.url_info_css),f=CrayonTagEditorSettings.extensions;t=function(){0<d.val().length&&!c.is(":visible")?(c.show(),d.removeClass(p.selected)):0>=d.val().length&&c.hide();var a=CrayonUtil.getExt(d.val());if(a){var b=f[a],g=b?b:a,h=CrayonTagEditorSettings.fallback_lang;e(l.lang_css+" option").each(function(){e(this).val()==g&&(h=g)});e(l.lang_css).val(h)}};d.keyup(t);d.change(t);var g=function(){var a=
e(this),c=e(this).attr(p.orig_value);"undefined"==typeof c&&(c="");var d=b.settingValue(a);CrayonUtil.log(a.attr("id")+" value: "+d);var f=null;a.is("input[type=checkbox]")&&(f=a.next("span"));CrayonUtil.log("   >>> "+a.attr("id")+" is "+c+" = "+d);c==d?(a.removeClass(p.changed),f&&f.removeClass(p.changed)):(a.addClass(p.changed),f&&f.addClass(p.changed));b.settingValue(a,d)};e("."+p.setting+"[id]:not(."+p.special+")").each(function(){e(this).change(g);e(this).keyup(g)})}))};b.showDialog=function(a){a=
e.extend({insert:null,edit:null,show:null,hide:b.hide,select:null,editor_str:null,ed:null,node:null,input:null,output:null},a);b.resetSettings();k=a.insert;d=a.edit;z=a.show;s=a.hide;F=a.select;y=a.input;E=a.output;r=a.editor_str;var x=a.node,x=a.node;n=!1;K.unbind();K.click(function(a){b.submitButton();a.preventDefault()});b.setSubmitText(l.submit_add);I.unbind();I.click(function(a){b.hide();a.preventDefault()});if(b.isCrayon(x))if(f=e(x),0!=f.length){D=f.attr("class");a=RegExp("\\b([A-Za-z-]+)"+
l.attr_sep+"(\\S+)","gim");x=a.execAll(D);D=e.trim(D.replace(a,""));a={};for(var c in x){var v=x[c][2];a[x[c][1]]=v}(c=f.attr("title"))&&(a.title=c);(c=f.attr("data-url"))&&(a.url=c);"undefined"!=typeof a.highlight&&(a.highlight="1");n=f.hasClass(l.inline_css);a.inline=n?"1":"0";var m=[];e(l.lang_css+" option").each(function(){var a=e(this).val();a&&m.push(a)});-1==e.inArray(a.lang,m)&&(a.lang=l.fallback_lang);a=b.validate(a);for(var C in a)c=e("#"+p.prefix+C+"."+p.setting),v=a[C],b.settingValue(c,
v),c.change(),c.hasClass(p.special)||(c.addClass(p.changed),c.is("input[type=checkbox]")&&(highlight=c.next("span"),highlight.addClass(p.changed))),CrayonUtil.log("loaded: "+C+":"+v);q=!0;b.setSubmitText(l.submit_edit);C=f.html();"encode"==y?C=CrayonUtil.encode_html(C):"decode"==y&&(C=CrayonUtil.decode_html(C));u.val(C)}else CrayonUtil.log("cannot load currNode of type pre");else F&&u.val(F),q=!1,b.setSubmitText(l.submit_add),f=null,D="";C=e("#"+l.inline_css);C.change(function(){n=e(this).is(":checked");
var a=e("."+l.inline_hide_css),c=e("."+l.inline_hide_only_css),b=[l.mark_css,l.range_css,l.title_css,l.url_css],d;for(d in b){var f=e(b[d]);f.attr("disabled",n)}if(n)for(d in a.hide(),c.hide(),a.closest("tr").hide(),b)f=e(b[d]),f.addClass("crayon-disabled");else for(d in a.show(),c.show(),a.closest("tr").show(),b)f=e(b[d]),f.removeClass("crayon-disabled")});C.change();C=q?l.dialog_title_edit:l.dialog_title_add;e(l.dialog_title_css).html(C);z&&z();u.focus();h();t();B&&(clearInterval(B),g=0);var w=
e("#TB_window");w.hide();var G=function(){w.show();var a=e(window).scrollTop();e(window).scrollTop(a+10);e(window).scrollTop(a-10)};B=setInterval(function(){"undefined"!=typeof w&&!w.hasClass("crayon-te-ajax")&&(w.addClass("crayon-te-ajax"),clearInterval(B),G());100<=g&&(clearInterval(B),G());g++},40)};b.addCrayon=function(){var a=e(l.url_css);if(0==a.val().length&&0==u.val().length)return u.addClass(p.selected),u.focus(),!1;u.removeClass(p.selected);var f=e("#"+l.inline_css);n=0!=f.length&&f.is(":checked");
var c=br_after="";q||(br_after=n?"html"==r?c=" ":"&nbsp;":"html"==r?c=" \n":"<p>&nbsp;</p>");var f=n?"span":"pre",g={},c=c+"<"+f+' class="',a=RegExp("\\b"+l.inline_css+"\\b","gim");n?null==a.exec(D)&&(D+=" "+l.inline_css+" "):D=D.replace(a,"");e("."+p.changed+"[id],."+p.changed+"["+l.data_value+"]").each(function(){var a=e(this).attr("id"),c=e(this).attr(l.data_value),a=M.removePrefixFromID(a);g[a]=c});g.lang=e(l.lang_css).val();a=e(l.mark_css).val();0!=a.length&&!n&&(g.mark=a);a=e(l.range_css).val();
0!=a.length&&!n&&(g.range=a);e(l.hl_css).is(":checked")&&(g.highlight="0");g.decode="true";var g=b.validate(g),h;for(h in g)a=g[h],CrayonUtil.log("add "+h+":"+a),c+=h+l.attr_sep+a+" ";c+=D;c+='" ';n||(h=e(l.title_css).val(),0!=h.length&&(c+='title="'+h+'" '),a=e(l.url_css).val(),0!=a.length&&(c+='data-url="'+a+'" '));h=e(l.code_css).val();"encode"==E?h=CrayonUtil.encode_html(h):"decode"==E&&(h=CrayonUtil.decode_html(h));c+=">"+("undefined"!=typeof h?h:"")+"</"+f+">"+br_after;q&&d?d(c):k&&k(c);return!0};
b.submitButton=function(){CrayonUtil.log("submit");!1!=b.addCrayon()&&b.hideDialog()};b.hideDialog=function(){CrayonUtil.log("hide");s&&s()};b.setOrigValues=function(){e("."+p.setting+"[id]").each(function(){var a=e(this);a.attr(p.orig_value,b.settingValue(a))})};b.resetSettings=function(){CrayonUtil.log("reset");e("."+p.setting).each(function(){var a=e(this);b.settingValue(a,a.attr(p.orig_value));a.change()});u.val("")};b.settingValue=function(a,b){if("undefined"==typeof b)return b=a.is("input[type=checkbox]")?
a.is(":checked")?"true":"false":a.val();if(a.is("input[type=checkbox]")){if("string"==typeof b)if("true"==b||"1"==b)b=!0;else if("false"==b||"0"==b)b=!1;a.prop("checked",b)}else a.val(b);a.attr(l.data_value,b)};b.validate=function(a){var b=["range","mark"],c;for(c in b){var d=b[c];"undefined"!=typeof a[d]&&(a[d]=a[d].replace(/\s/g,""))}return a};b.isCrayon=function(a){return null!=a&&("PRE"==a.nodeName||"SPAN"==a.nodeName&&e(a).hasClass(l.inline_css))};b.elemValue=function(a){var b=null;return b=
a.is("input[type=checkbox]")?a.is(":checked"):a.val()};b.setSubmitText=function(a){K.html(a)}}})(jQueryCrayon);
